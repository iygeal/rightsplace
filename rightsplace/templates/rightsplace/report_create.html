{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Report</title>
    <link rel="stylesheet" href="{% static 'css/report_create.css' %}">
</head>

<body class="bg-light">

<div class="container py-5">
    <h2 class="mb-4 fw-bold">Submit an Incident Report</h2>

    {% if success %}
        <div class="alert alert-success">
            Your report has been submitted successfully.
        </div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data" id="reportForm">
        {% csrf_token %}

        <!-- TITLE -->
        <div class="mb-3">
            <label class="form-label">Title</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="text-danger">{{ form.title.errors }}</div>
            {% endif %}
        </div>

        <!-- DESCRIPTION -->
        <div class="mb-3">
            <label class="form-label">Description</label>
            {{ form.description }}
            {% if form.description.errors %}
                <div class="text-danger">{{ form.description.errors }}</div>
            {% endif %}
        </div>

        <!-- CATEGORY -->
        <div class="mb-3">
            <label class="form-label">Category</label>
            {{ form.category }}
            {% if form.category.errors %}
                <div class="text-danger">{{ form.category.errors }}</div>
            {% endif %}
        </div>

        <!-- INCIDENT LOCATION -->
        <div class="mb-3">
            <label class="form-label">Incident Location</label>
            {{ form.incident_location }}
            {% if form.incident_location.errors %}
                <div class="text-danger">{{ form.incident_location.errors }}</div>
            {% endif %}
        </div>

        <!-- DJANGO REAL FILE INPUT (HIDDEN) -->
        <div style="display:none;">
            {{ form.evidence_files }}
        </div>

        <!-- DRAG & DROP ZONE -->
        <div id="dropZone" class="border border-2 border-secondary rounded p-4 text-center bg-white mb-3"
             style="cursor:pointer;">
            <p class="text-muted">Drag & drop evidence files here, or click to select.</p>
            <input type="file" id="fileInput" multiple hidden>
        </div>

        <!-- FILE LIST PREVIEW -->
        <ul id="fileList" class="list-group mb-3"></ul>

        <button type="submit" class="btn btn-primary px-4">Submit Report</button>
    </form>
</div>

<script src="{% static 'js/report_create.js' %}"></script>

</body>
</html>
